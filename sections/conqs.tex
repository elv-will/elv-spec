\section{Content Objects}
Content objects are the main way tenants store and retrieve data.
They are created by communicating with a node, creating a draft, and then when the tenant is ready to commit to a version of that content object they provide the node with a signed blob.
The node then submits a \textbf{CommitVersion} call on chain which stores the hash of the data, a flag showing the commit as pending, and some additional metadata.
Once the verison is commited, other nodes in the space can retrieve the content object.
Once a sufficient number of nodes retrieve copies of the content object, %TODO: talk about partitioning and how we assert data is replicated
the original authoring node submits a \textbf{ConfirmVersion} which marks the commit as finalized.

\subsection{Content Object Lifecycle}

\begin{tikzpicture}[
  ->,
  stage/.style={rectangle, draw=black, minimum size=3em}
  ]
  \node[stage] (draftcreated) {Draft Created};
  \node[stage] (modifydraft) [below=of draftcreated] {Modify Draft};
  \node[stage] (draftfinalized) [below=of modifydraft] {Draft Finalized};
  \node[stage] (commitversion) [below=of draftfinalized] {Version Commited};
  \node[stage] (distversion) [below=of commitversion] {Version Distributed};
  \node[stage] (finalizeversion) [below=of distversion] {Version Finalized};
  % Lines
  \path (draftcreated) edge node[right] {Write token given to tenant} (modifydraft);
  \path (modifydraft) edge[loop right] node[right] {Content modified with write token} (modifydraft);
  \path (modifydraft) edge node[right] {Tenant agrees to finalize version, signs $\texttt{VerCreateMsg}$ for node} (draftfinalized);
  \path (draftfinalized) edge node[right] {Node calls \textbf{CommitVersion} with provided $\texttt{VerCreateMsg}$} (commitversion);
  \path (commitversion) edge node[right] {Node sends copies to peers} (distversion);
  \path (distversion) edge node[right] {Submit \textbf{FinalizeVersion}} (finalizeversion);
  \path (distversion) edge[loop right] node[right] {Retry part distribution if failed} (distversion);
\end{tikzpicture}
